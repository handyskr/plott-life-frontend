---
import Header from "../../components/template/Header.astro";
import { getFaqs } from "../../libs/strapi";
import Layout from "../../layouts/Layout.astro";
import StrapiContent from "../../components/template/StrapiContent.astro";

const { faqCategories, faqs } = await getFaqs();
console.log(faqCategories, faqs);
---
<Layout>
  <Header
    slot="header"
    title="자주 묻는 질문"
    showBackIcon={true}
    showHomeIcon={true} />
  <section class='px-6 py-8 flex flex-col gap-6'>
    <div class='flex flex-row flex-wrap gap-4'>
      {faqCategories.map(it => (
        <div class:list={["badge", it.audience == "host" ? "badge-soft badge-primary" : "badge-secondary"]}>{it.name}</div>
      ))}
    </div>
    <article class='w-full mx-auto prose prose-h1:font-bold prose-h1:text-xl prose-a:text-blue-600 prose-p:text-justify prose-img:rounded-xl prose-headings:underline'>
      <div class="join join-vertical">
        {faqs.map(faq => (
          <div tabindex="0" class="collapse collapse-arrow join-item border-base-300 border">
            <div class="collapse-title font-semibold">
              <div class:list={["badge", faq.category?.audience == "host" ? "badge-soft badge-primary" : "badge-secondary"]}>{faq.category?.name}</div>
              {faq.question}
            </div>
            <div class="collapse-content text-sm">
              {faq.answer.map(content => (<StrapiContent content={content} />))}
            </div>
          </div>
        ))}
      </div>
    </article>
  </section>
</Layout>
