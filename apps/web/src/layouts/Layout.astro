---
import Meta from '@layouts/Meta.astro';
import '@styles/style.css';
import GoogleAnalytics from '../components/script/GoogleAnalytics.astro';
import GoogleTagManager from '../components/script/GoogleTagManager.astro';
import GoogleTagManagerFallback from '../components/script/GoogleTagManagerFallback.astro';

interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  image?: string;
}

let { title, subtitle, description, image } = Astro.props;
if (!title) {
  if (subtitle) {
    title = `plott LIFE | ${subtitle}`;
  } else {
    title = 'plott LIFE | 단기임대 플라트 라이프';
  }
}
if (!description) {
  description = '레지던스, 아파트, 오피스텔, 원룸 등 1주 이상 단기임대는 플라트 라이프';
}
if (!image) {
  image = 'https://cdn.plott.co.kr/images/ogimage.webp?w=1200&h=630';
}
---
<html
  lang='ko'
  data-theme='light'
>
  <head>
    <Meta title={title} description={description} image={image} />
    <GoogleAnalytics />
    <GoogleTagManager />
  </head>
  <body class='flex justify-center min-h-screen'>
    <GoogleTagManagerFallback />
    <div class='relative flex flex-col w-full min-h-screen bg-base-100'>
      <main class='flex flex-col max-w-(--max-width) bg-white mx-auto w-full shadow-[0_0_20px_rgba(0,0,0,0.05)] min-h-screen'>
        <slot name='header' />
        <div class='flex-1 overflow-y-auto'>
          <slot />
        </div>
        <slot name='footer' />
        <slot name='nav' />
      </main>
    </div>
  </body>
  <!-- 임시로 준비중 처리 -->
  <script type='module'>
    const elements = [
      document.getElementById('nav-contract'),
      document.getElementById('nav-my'),
      document.getElementById('btn-contract'),
      document.getElementById('btn-inquiry'),
      document.getElementById('privacy-policy'),
      document.getElementById('terms-of-service'),
      document.getElementById('service-operation-policy'),
      document.getElementById('help'),
    ];

    const handleExceptionEvent = (event) => {
      event.preventDefault();
      alert('준비중입니다!');
    };

    elements.forEach((el) => {
      if (el) el.addEventListener('click', handleExceptionEvent);
    });
  </script>
</html>
